<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: User
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!User.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (U)</a> &raquo;
    
    
    <span class="title">User</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: User
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">User</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/user.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Represents users in Dewey Travels. Users in Dewey sign up with Facebook, and thus
its facebook credentials are stored in this class. It is important to note that 
Dewey users’ Facebook friends are also stored in this class, regarless of whether they
already signed up. The attribute is_registered is important to distinguish
Dewey users and non-user friends of Dewey users.
Users are indexed by first name and last name in ElasticSearch through searchkick.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_facebook_user-class_method" title="register_facebook_user (class method)">+ (Object) <strong>register_facebook_user</strong>(id, first_name, last_name, email, image_url) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Register Facebook user to Dewey, given its ID, first name, last name, email and image url as grabbed from Facebook API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sort_by_degree-class_method" title="sort_by_degree (class method)">+ (Object) <strong>sort_by_degree</strong>(a, b) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Comparison function between two users using the smallest topic depth / degree as its differentiator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#suggestions-class_method" title="suggestions (class method)">+ (Object) <strong>suggestions</strong>(topic, current_user, previous_suggestions = []) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns at most five user suggestions, given the current user, the topic, and the previous suggestions.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_facebook_friends-instance_method" title="#add_facebook_friends (instance method)">- (Object) <strong>add_facebook_friends</strong>(friends) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Adds a list of Facebook friends to this user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_friend-instance_method" title="#add_friend (instance method)">- (Object) <strong>add_friend</strong>(friend) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add a user object friend as a friend.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes-instance_method" title="#attributes (instance method)">- (Object) <strong>attributes</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the full list of attributes associated with this class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#degree-instance_method" title="#degree (instance method)">- (Object) <strong>degree</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the smallest topic depth that is associated to this user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#friends_on_site-instance_method" title="#friends_on_site (instance method)">- (Object) <strong>friends_on_site</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the list of friends that are registered on Dewey.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the full name of this user.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="register_facebook_user-class_method">
  
    + (<tt>Object</tt>) <strong>register_facebook_user</strong>(id, first_name, last_name, email, image_url) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Register Facebook user to Dewey, given its ID, first name, last name, email
and image url as grabbed from Facebook API.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 98</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_register_facebook_user'>register_facebook_user</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_image_url'>image_url</span><span class='rparen'>)</span>
  <span class='comment'># TODO: register facebook users to a different domain?
</span>  <span class='id identifier rubyid_graph'>graph</span> <span class='op'>=</span> <span class='const'>Graph</span><span class='period'>.</span><span class='id identifier rubyid_find_by_domain'>find_by_domain</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixtures</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_graph'>graph</span>
    <span class='id identifier rubyid_graph'>graph</span> <span class='op'>=</span> <span class='const'>Graph</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_graph'>graph</span><span class='period'>.</span><span class='id identifier rubyid_domain'>domain</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixtures</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_graph'>graph</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_new_user'>new_user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_fb_id'>fb_id</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_first_name'>first_name</span> <span class='op'>=</span> <span class='id identifier rubyid_first_name'>first_name</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_last_name'>last_name</span> <span class='op'>=</span> <span class='id identifier rubyid_last_name'>last_name</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_image_url'>image_url</span> <span class='op'>=</span> <span class='id identifier rubyid_image_url'>image_url</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_graph'>graph</span> <span class='op'>=</span> <span class='id identifier rubyid_graph'>graph</span>
  <span class='id identifier rubyid_new_user'>new_user</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_new_user'>new_user</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sort_by_degree-class_method">
  
    + (<tt>Object</tt>) <strong>sort_by_degree</strong>(a, b) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Comparison function between two users using the smallest topic depth / degree
as its differentiator.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 144</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sort_by_degree'>sort_by_degree</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='kw'>then</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='kw'>then</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_degree'>degree</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_degree'>degree</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='kw'>then</span>
    <span class='kw'>return</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="suggestions-class_method">
  
    + (<tt>Object</tt>) <strong>suggestions</strong>(topic, current_user, previous_suggestions = []) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns at most five user suggestions, given the current user, the topic, and the previous suggestions.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 159</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_suggestions'>suggestions</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='comma'>,</span> <span class='id identifier rubyid_previous_suggestions'>previous_suggestions</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_should_suggest_self'>should_suggest_self</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_expertises'>expertises</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_num_new_users'>num_new_users</span> <span class='op'>=</span> <span class='id identifier rubyid_should_suggest_self'>should_suggest_self</span> <span class='op'>?</span> <span class='int'>4</span> <span class='op'>:</span> <span class='int'>5</span>
  <span class='ivar'>@users</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_suggestions'>previous_suggestions</span>
  <span class='ivar'>@users</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_friends'>friends</span> <span class='op'>-</span> <span class='id identifier rubyid_topic'>topic</span><span class='period'>.</span><span class='id identifier rubyid_experts'>experts</span> <span class='op'>-</span> <span class='id identifier rubyid_previous_suggestions'>previous_suggestions</span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='id identifier rubyid_current_user'>current_user</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='lparen'>(</span><span class='id identifier rubyid_num_new_users'>num_new_users</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_should_suggest_self'>should_suggest_self</span> <span class='kw'>then</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_current_user'>current_user</span><span class='rbracket'>]</span><span class='op'>+</span><span class='ivar'>@users</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='lparen'>(</span><span class='id identifier rubyid_num_new_users'>num_new_users</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@users</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='lparen'>(</span><span class='id identifier rubyid_num_new_users'>num_new_users</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_facebook_friends-instance_method">
  
    - (<tt>Object</tt>) <strong>add_facebook_friends</strong>(friends) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Adds a list of Facebook friends to this user.
The input is a list of friends, where each friend is represented as a map (as returned by
Facebook API). This function will create the user object for each friends (if it has not exist already)
and add it to the current user’s list of friends.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 58</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_facebook_friends'>add_facebook_friends</span><span class='lparen'>(</span><span class='id identifier rubyid_friends'>friends</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_friends'>friends</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_friend'>friend</span><span class='op'>|</span>
    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_friend'>friend</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_first_name'>first_name</span> <span class='op'>=</span> <span class='id identifier rubyid_friend'>friend</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_last_name'>last_name</span> <span class='op'>=</span> <span class='id identifier rubyid_friend'>friend</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_image_url'>image_url</span> <span class='op'>=</span> <span class='id identifier rubyid_friend'>friend</span><span class='lbracket'>[</span><span class='symbol'>:picture</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span>

    <span class='ivar'>@user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_find_by_fb_id'>find_by_fb_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@user</span>
      <span class='ivar'>@user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_register_facebook_user'>register_facebook_user</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_first_name'>first_name</span><span class='comma'>,</span> <span class='id identifier rubyid_last_name'>last_name</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_image_url'>image_url</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_add_friend'>add_friend</span><span class='lparen'>(</span><span class='ivar'>@user</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_friends'>friends</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@user</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_add_friend'>add_friend</span><span class='lparen'>(</span><span class='ivar'>@user</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_friend-instance_method">
  
    - (<tt>Object</tt>) <strong>add_friend</strong>(friend) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add a user object friend as a friend.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_friend'>add_friend</span><span class='lparen'>(</span><span class='id identifier rubyid_friend'>friend</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_friends'>friends</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_friend'>friend</span>
  <span class='id identifier rubyid_friend'>friend</span><span class='period'>.</span><span class='id identifier rubyid_friends'>friends</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attributes-instance_method">
  
    - (<tt>Object</tt>) <strong>attributes</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the full list of attributes associated with this class.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes'>attributes</span>
  <span class='comment'># This is a quick hack to make sure that the full name is always sent to Angular,
</span>  <span class='comment'># even though it is not a natural attribute of the class.
</span>  <span class='kw'>super</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="degree-instance_method">
  
    - (<tt>Object</tt>) <strong>degree</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the smallest topic depth that is associated to this user.
For example, if a user is listed as an expert on topics Brazil, South America,
and Rio Janeiro, this function will return 1 because South America is the closest
topic to the root and its distance is 1.
Read the documentation of the degree method of Topic class to understand more.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_degree'>degree</span>
   <span class='id identifier rubyid_degrees'>degrees</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
   <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_expertises'>expertises</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_topic'>topic</span><span class='op'>|</span>
     <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_topic'>topic</span><span class='period'>.</span><span class='id identifier rubyid_degree'>degree</span>
     <span class='id identifier rubyid_degrees'>degrees</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_degrees'>degrees</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='int'>1</span>
   <span class='kw'>end</span>
   <span class='kw'>if</span> <span class='id identifier rubyid_degrees'>degrees</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span>
     <span class='kw'>return</span> <span class='int'>1</span>
   <span class='kw'>elsif</span> <span class='id identifier rubyid_degrees'>degrees</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span>
     <span class='kw'>return</span> <span class='int'>2</span>
   <span class='kw'>elsif</span> <span class='id identifier rubyid_degrees'>degrees</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span>
     <span class='kw'>return</span> <span class='int'>3</span>
   <span class='kw'>elsif</span> <span class='id identifier rubyid_degrees'>degrees</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span>
     <span class='kw'>return</span> <span class='int'>4</span>
   <span class='kw'>else</span>
     <span class='kw'>return</span> <span class='int'>0</span>
   <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="friends_on_site-instance_method">
  
    - (<tt>Object</tt>) <strong>friends_on_site</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the list of friends that are registered on Dewey</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_friends_on_site'>friends_on_site</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_friends'>friends</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:is_registered</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt>Object</tt>) <strong>name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the full name of this user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/user.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_first_name'>first_name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_last_name'>last_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Jun  7 03:18:38 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.0.0).
</div>

  </body>
</html>